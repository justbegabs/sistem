<!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha de Personagem</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        html,
        body {
            background: #C24914 !important;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        :root[data-theme="dark"] body {
            background: #000000 !important;
        }

        .pericias {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .pericias h2 {
            color: var(--cor-preta);
            margin-bottom: 20px;
            text-align: center;
        }

        .pericias-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .pericia-principal {
            background: rgba(255, 180, 100, 0.55);
            border-radius: 8px;
            padding: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(3px);
        }

        .pericia-principal:hover {
            transform: translateY(-2px);
        }

        .pericia-principal h3 {
            color: var(--cor-cinza);
            margin: 0;
            font-size: 1.1em;
        }

        .pericia-principal::after {
            content: '‚Ä∫';
            color: var(--cor-cinza);
            font-size: 1.5em;
            transition: transform 0.3s ease;
        }

        .pericia-principal:hover::after {
            transform: translateX(5px);
        }

        .modal-pericias {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
        }

        .modal-pericias .modal-content {
            background: #ffffff;
            margin: 10% auto;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            position: relative;
        }

        .modal-pericias h2 {
            color: #F2780C;
            margin-bottom: 20px;
            text-align: center;
        }

        .pericia-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        /* Estiliza√ß√£o da barra de rolagem */
        .pericia-list::-webkit-scrollbar {
            width: 8px;
        }

        .pericia-list::-webkit-scrollbar-track {
            background: rgba(242, 120, 12, 0.1);
            border-radius: 4px;
        }

        .pericia-list::-webkit-scrollbar-thumb {
            background: rgba(242, 120, 12, 0.3);
            border-radius: 4px;
        }

        .pericia-list::-webkit-scrollbar-thumb:hover {
            background: rgba(242, 120, 12, 0.5);
        }

        /* Ajuste para o tema escuro */
        :root[data-theme="dark"] .pericia-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }

        :root[data-theme="dark"] .pericia-list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
        }

        :root[data-theme="dark"] .pericia-list::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .pericia-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(255, 180, 100, 0.1);
            border-radius: 5px;
            border: 1px solid rgba(242, 120, 12, 0.2);
        }

        .pericia-item label {
            color: #F2780C;
            cursor: pointer;
            transition: color 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pericia-item .dado-icon {
            width: 24px;
            height: 24px;
            cursor: pointer;
            transition: transform 0.3s ease;
            object-fit: contain;
            background-color: transparent;
            padding: 2px;
            border-radius: 4px;
        }

        .pericia-item .dado-icon:hover {
            transform: rotate(180deg);
            background-color: rgba(242, 120, 12, 0.1);
        }

        .pericia-item .valor-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pericia-item label:hover {
            color: #D66A0B;
        }

        .pericia-item input {
            width: 60px;
            text-align: center;
            background: rgba(255, 180, 100, 0.1);
            border: 1px solid rgba(242, 120, 12, 0.3);
            color: #F2780C;
            padding: 5px;
            border-radius: 4px;
        }

        :root[data-theme="dark"] .modal-pericias .modal-content {
            background: #1a1a1a;
        }

        :root[data-theme="dark"] .modal-pericias h2 {
            color: #F2780C;
        }

        :root[data-theme="dark"] .pericia-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        :root[data-theme="dark"] .pericia-item label {
            color: #F2780C;
        }

        :root[data-theme="dark"] .pericia-item input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #F2780C;
        }

        :root[data-theme="dark"] .pericias {
            background: rgba(0, 0, 0, 0.3);
        }

        :root[data-theme="dark"] .pericia-principal {
            background: rgba(255, 255, 255, 0.05);
        }

        :root[data-theme="dark"] .pericia-principal h3 {
            color: #F2780C;
        }

        .inventario {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .inventario h2 {
            color: var(--cor-preta);
            margin-bottom: 15px;
            text-align: center;
        }

        .inventario-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--cor-cinza);
        }

        .lista-itens {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 10px;
        }

        .item-inventario {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .item-inventario input[type="text"] {
            flex: 1;
            padding: 6px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .item-inventario button {
            background: #F2780C;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 1em;
        }

        .item-inventario button:hover {
            background: #c95e09;
        }

        #adicionar-item {
            width: 100%;
            background: #F2780C;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 8px;
            font-size: 1em;
            cursor: pointer;
            margin-top: 5px;
        }

        #adicionar-item:disabled {
            background: #aaa;
            cursor: not-allowed;
        }

        :root[data-theme="dark"] .inventario {
            background: rgba(0, 0, 0, 0.3);
        }

        :root[data-theme="dark"] .inventario h2 {
            color: #F2780C;
        }

        :root[data-theme="dark"] .inventario-info {
            color: #F2780C;
        }

        :root[data-theme="dark"] .item-inventario input[type="text"] {
            background: #222;
            color: #fff;
            border: 1px solid #444;
        }

        :root[data-theme="dark"] .item-inventario button {
            background: #F2780C;
            color: #fff;
        }

        :root[data-theme="dark"] #adicionar-item {
            background: #F2780C;
        }
    </style>
</head>

<body>
    <header>
        <div class="header-content">
            <button class="voltar">‚Üê Voltar</button>
            <div class="header-buttons">
                <button class="tema" onclick="toggleTheme()">
                    <i id="themeIcon" class="fas fa-sun"></i>
                    Tema
                </button>
                <button class="obs">OBS</button>
                <button class="salvar">Salvar</button>
            </div>
        </div>
    </header>
    <div class="container">
        <!-- Div espec√≠fica para o background -->
        <div class="background-container"></div>

        <section class="informacoes-basicas">
            <h2>Informa√ß√µes B√°sicas</h2>
            <div class="grid-container">
                <div class="input-group full">
                    <label>Nome</label>
                    <input type="text" placeholder="Nome do personagem">
                </div>
                <div class="input-group">
                    <label>Idade</label>
                    <input type="number" placeholder="Idade">
                </div>
                <div class="input-group">
                    <label>Data de Nascimento</label>
                    <input type="date" placeholder="Ex: 01/01/1990">
                </div>
                <div class="input-group">
                    <label>Altura</label>
                    <input type="text" placeholder="Ex: 1,75m">
                </div>
                <div class="input-group">
                    <label>Tipo Sangu√≠neo</label>
                    <input type="text" placeholder="Ex: A+">
                </div>
                <div class="input-group full">
                    <label>Sexualidade</label>
                    <input type="text" placeholder="Sexualidade">
                </div>
            </div>
        </section>

        <section class="nivel">
            <label>N√≠vel</label>
            <div class="status-bar">
                <button onmousedown="startDecrementNivel()" onmouseup="stopNivelInterval()"
                    onmouseleave="stopNivelInterval()">-</button>
                <input type="number" id="nivel-input" value="0" min="0" max="100" onchange="atualizarNivel(this)">
                <button onmousedown="startIncrementNivel()" onmouseup="stopNivelInterval()"
                    onmouseleave="stopNivelInterval()">+</button>
            </div>
            <div class="progress-bar">
                <div class="progress" id="nivel-progress" style="width: 0%;"></div>
            </div>
        </section>

        <section class="status-vitais">
            <h2>Status Vitais</h2>
            <div class="status-grid">
                <div class="status-item">
                    <label>‚ù§Ô∏è Vida</label>
                    <div class="status-bar">
                        <input type="number" value="0" min="0" max="20" onchange="atualizarStatus(this)"> /
                        <span>20</span>
                    </div>
                    <div class="barra-progresso vida"></div>
                </div>
                <div class="status-item">
                    <label>üß† Sanidade</label>
                    <div class="status-bar">
                        <input type="number" value="0" min="0" max="10" onchange="atualizarStatus(this)"> / <span>10</span>
                    </div>
                    <div class="barra-progresso sanidade"></div>
                </div>
                <div class="status-item">
                    <label>‚ö° Mana</label>
                    <div class="status-bar">
                        <input type="number" value="0" min="0" max="15" onchange="atualizarStatus(this)"> /
                        <span>15</span>
                    </div>
                    <div class="barra-progresso mana"></div>
                </div>
                <div class="status-item">
                    <label>‚≠ê Alma</label>
                    <div class="status-bar">
                        <input type="number" value="0" min="0" max="15" onchange="atualizarStatus(this)"> /
                        <span>15</span>
                    </div>
                    <div class="barra-progresso alma"></div>
                </div>
            </div>
        </section>

        <div class="grid-2-columns">
            <section class="status-combate">
                <h2>Status de Combate</h2>
                <div class="status-list">
                    <div class="status-item">
                        <label>Defesa</label>
                        <input type="number" value="10" readonly>
                    </div>
                    <div class="status-item">
                        <label>Esquiva</label>
                        <input type="number" value="10" readonly>
                    </div>
                    <div class="status-item">
                        <label>Bloqueio</label>
                        <input type="number" value="0" readonly>
                    </div>
                </div>
            </section>

            <section class="info-personagem">
                <h2 id="titulo-info-personagem">Informa√ß√µes do Personagem</h2>
                <div class="info-list">
                    <div class="info-item">
                        <label>Ra√ßa</label>
                        <input type="text" placeholder="Ra√ßa" readonly onclick="openRacaModal()">
                    </div>
                    <div class="info-item">
                        <label>Classe</label>
                        <input type="text" placeholder="Classe" readonly onclick="openClasseModal()">
                    </div>
                    <div class="info-item">
                        <label>Origem</label>
                        <input type="text" placeholder="Origem" readonly onclick="openOrigemModal()">
                    </div>
                    <div class="info-item" id="familia-base-item" style="display: none;">
                        <label>Fam√≠lia-Base</label>
                        <input type="text" placeholder="Fam√≠lia-Base" readonly onclick="openFamiliaBaseModal()">
                    </div>
                </div>
            </section>
        </div>

        <div class="grid-2-columns">
            <section class="atributos-teste">
                <h2>Atributos de Teste <span>0/12</span></h2>
                <div class="atributos-list">
                    <div class="atributo-item">
                        <label>For√ßa</label>
                        <input type="number" value="0" min="-5">
                    </div>
                    <div class="atributo-item">
                        <label>Destreza</label>
                        <input type="number" value="0" min="-5">
                    </div>
                    <div class="atributo-item">
                        <label>Intelecto</label>
                        <input type="number" value="0" min="-5">
                    </div>
                    <div class="atributo-item">
                        <label>Carisma</label>
                        <input type="number" value="0" min="-5">
                    </div>
                    <div class="atributo-item">
                        <label>Magia</label>
                        <input type="number" value="0" min="-5">
                    </div>
                    <div class="atributo-item">
                        <label>Constitui√ß√£o</label>
                        <input type="number" value="0" min="-5">
                    </div>
                </div>
            </section>

            <section class="atributos-sorte">
                <h2>Atributos de Sorte <span>0/12</span></h2>
                <div class="atributos-list">
                    <div class="atributo-item">
                        <label>Sorte</label>
                        <input type="number" value="0" min="-5">
                    </div>
                    <div class="atributo-item">
                        <label>Fama</label>
                        <input type="number" value="0" min="-5">
                    </div>
                    <div class="atributo-item">
                        <label>Resili√™ncia</label>
                        <input type="number" value="0" min="-5">
                    </div>
                    <div class="atributo-item">
                        <label>F√©</label>
                        <input type="number" value="0" min="-5">
                    </div>
                    <div class="atributo-item">
                        <label>Criatividade</label>
                        <input type="number" value="0" min="-5">
                    </div>
                </div>
            </section>
        </div>

        <section class="pericias">
            <h2>
                Per√≠cias
                <span class="contador-pericias" style="float:right;font-size:0.8em;font-weight:normal;margin-left:8px;"></span>
            </h2>
            <div class="pericias-grid">
                <div class="pericia-principal" onclick="abrirModalPericia('For√ßa')">
                    <h3>For√ßa</h3>
                </div>
                <div class="pericia-principal" onclick="abrirModalPericia('Destreza')">
                    <h3>Destreza</h3>
                </div>
                <div class="pericia-principal" onclick="abrirModalPericia('Intelecto')">
                    <h3>Intelecto</h3>
                </div>
                <div class="pericia-principal" onclick="abrirModalPericia('Carisma')">
                    <h3>Carisma</h3>
                </div>
                <div class="pericia-principal" onclick="abrirModalPericia('Magia')">
                    <h3>Magia</h3>
                </div>
                <div class="pericia-principal" onclick="abrirModalPericia('Constitui√ß√£o')">
                    <h3>Constitui√ß√£o</h3>
                </div>
            </div>
        </section>

        <!-- Caixa de Invent√°rio -->
        <section class="inventario">
            <h2>Invent√°rio</h2>
            <div class="inventario-info">
                <span>Capacidade: <span id="capacidade-inventario">0</span></span>
                <span>Itens: <span id="contador-itens">0</span></span>
            </div>
            <div id="lista-itens" class="lista-itens"></div>
            <button type="button" id="adicionar-item">Adicionar Item</button>
        </section>

        <!-- Modal de Per√≠cias -->
        <div class="modal-pericias" id="modal-pericias">
            <div class="modal-content">
                <span class="close-modal" onclick="fecharModalPericia()">&times;</span>
                <h2 id="modal-pericia-titulo">Per√≠cias de </h2>
                <div class="pericia-list" id="modal-pericia-lista">
                    <!-- Lista de per√≠cias ser√° preenchida via JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Sele√ß√£o de Ra√ßa -->
    <div class="modal-racas" id="modal-racas">
        <div class="modal-content">
            <span class="close-modal" onclick="closeRacaModal()">&times;</span>
            <h2>Selecione sua Ra√ßa</h2>
            <div class="raca-grid">
                <div class="raca-card" data-raca="Anjo">
                    <h3>Anjo</h3>
                    <p>Ser celestial divino com poderes sagrados e asas majestosas.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Anjo', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Anjo Ca√≠do">
                    <h3>Anjo Ca√≠do</h3>
                    <p>Um ser celestial que perdeu sua gra√ßa divina, mas manteve parte de seus poderes.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Anjo Ca√≠do', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Banshee">
                    <h3>Banshee</h3>
                    <p>Esp√≠rito feminino conhecido por seu grito mortal e press√°gios de morte.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Banshee', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Bruxa">
                    <h3>Bruxa</h3>
                    <p>Praticante de magia antiga com dom√≠nio sobre feiti√ßos e po√ß√µes.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Bruxa', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Ciborgue">
                    <h3>Ciborgue</h3>
                    <p>Ser h√≠brido de org√¢nico e mec√¢nico com capacidades aprimoradas.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Ciborgue', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Dem√¥nio">
                    <h3>Dem√¥nio</h3>
                    <p>Criatura das profundezas infernais com poderes sobrenaturais.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Dem√¥nio', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Elfo">
                    <h3>Elfo</h3>
                    <p>Ser m√≠stico com forte conex√£o com a natureza e magia ancestral.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Elfo', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Esqueleto">
                    <h3>Esqueleto</h3>
                    <p>Guerreiro n√£o-morto que mant√©m suas habilidades de combate.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Esqueleto', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Fae">
                    <h3>Fae</h3>
                    <p>Criatura fe√©rica com poderes m√°gicos e natureza travessa.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Fae', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Fauno/S√°tiro">
                    <h3>Fauno/S√°tiro</h3>
                    <p>Ser meio-humano meio-bode com afinidade musical e natural.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Fauno/S√°tiro', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Humano">
                    <h3>Humano</h3>
                    <p>Ser vers√°til com grande potencial de adapta√ß√£o e aprendizado.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Humano', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Kanima">
                    <h3>Kanima</h3>
                    <p>Criatura metamorfa com habilidades reptilianas.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Kanima', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Kitsune">
                    <h3>Kitsune</h3>
                    <p>Esp√≠rito raposa com poderes m√≠sticos e m√∫ltiplas caudas.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Kitsune', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Lobisomem">
                    <h3>Lobisomem</h3>
                    <p>Metamorfo com capacidade de transforma√ß√£o em lobo.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Lobisomem', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Metamorfo">
                    <h3>Metamorfo</h3>
                    <p>Ser capaz de alterar sua forma f√≠sica √† vontade.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Metamorfo', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Neko">
                    <h3>Neko</h3>
                    <p>Humanoide com caracter√≠sticas felinas e agilidade natural.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Neko', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Nogitsune">
                    <h3>Nogitsune</h3>
                    <p>Esp√≠rito raposa maligno que se alimenta de caos e dor.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Nogitsune', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Semideus">
                    <h3>Semideus</h3>
                    <p>Descendente de deuses com poderes divinos herdados.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Semideus', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Sereia/Trit√£o">
                    <h3>Sereia/Trit√£o</h3>
                    <p>Ser aqu√°tico com poderes m√≠sticos das profundezas.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Sereia/Trit√£o', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Siren">
                    <h3>Siren</h3>
                    <p>Criatura marinha com canto hipn√≥tico e poderes de persuas√£o.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Siren', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="S√∫cubo">
                    <h3>S√∫cubo</h3>
                    <p>Dem√¥nio sedutor que se alimenta de energia vital.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('S√∫cubo', this)">Selecionar</button>
                </div>
                <div class="raca-card" data-raca="Vampiro">
                    <h3>Vampiro</h3>
                    <p>Imortal que se alimenta de sangue com poderes sobrenaturais.</p>
                    <button class="selecionar-raca" onclick="selecionarRaca('Vampiro', this)">Selecionar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Sele√ß√£o de Classe -->
    <div class="modal-classes" id="modal-classes">
        <div class="modal-content">
            <span class="close-modal" onclick="closeClasseModal()">&times;</span>
            <h2>Selecione sua Classe</h2>
            <div class="classe-grid">
                <div class="classe-card" data-classe="Armadilheiro">
                    <h3>Armadilheiro</h3>
                    <p>Especialista em criar e desarmar armadilhas, mestre da prepara√ß√£o t√°tica.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Criar Armadilhas</li>
                            <li>Detectar Perigos</li>
                            <li>Sabotagem</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe"
                        onclick="selecionarClasse('Armadilheiro', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Atirador">
                    <h3>Atirador</h3>
                    <p>Mestre em combate √† dist√¢ncia com precis√£o letal.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Tiro Preciso</li>
                            <li>Mira Aprimorada</li>
                            <li>Disparo R√°pido</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe" onclick="selecionarClasse('Atirador', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Carteado">
                    <h3>Carteado</h3>
                    <p>Manipulador de cartas m√≠sticas com poderes sobrenaturais.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Leitura de Cartas</li>
                            <li>Truques M√°gicos</li>
                            <li>Destino Alterado</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe" onclick="selecionarClasse('Carteado', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Cl√©rigo">
                    <h3>Cl√©rigo</h3>
                    <p>Sacerdote divino com poderes de cura e prote√ß√£o.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Cura Divina</li>
                            <li>Ben√ß√£o</li>
                            <li>Prote√ß√£o Sagrada</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe" onclick="selecionarClasse('Cl√©rigo', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Combatente">
                    <h3>Combatente</h3>
                    <p>Guerreiro vers√°til especializado em diversos estilos de luta.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>T√©cnicas de Combate</li>
                            <li>Adapta√ß√£o T√°tica</li>
                            <li>Contra-ataque</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe" onclick="selecionarClasse('Combatente', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Curandeiro">
                    <h3>Curandeiro</h3>
                    <p>Especialista em artes curativas e medicina natural.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Primeiros Socorros</li>
                            <li>Medicina Natural</li>
                            <li>Rem√©dios Caseiros</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe" onclick="selecionarClasse('Curandeiro', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Demonologista">
                    <h3>Demonologista</h3>
                    <p>Estudioso das artes demon√≠acas e poderes infernais.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Invoca√ß√£o Demon√≠aca</li>
                            <li>Pactos Sombrios</li>
                            <li>Conhecimento Infernal</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe"
                        onclick="selecionarClasse('Demonologista', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Domador">
                    <h3>Domador</h3>
                    <p>Mestre na arte de treinar e controlar criaturas.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Domar Criaturas</li>
                            <li>Empatia Animal</li>
                            <li>Comando de Besta</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe" onclick="selecionarClasse('Domador', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Espi√£o">
                    <h3>Espi√£o</h3>
                    <p>Mestre da infiltra√ß√£o e coleta de informa√ß√µes.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Furtividade</li>
                            <li>Disfarce</li>
                            <li>Coleta de Informa√ß√µes</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe" onclick="selecionarClasse('Espi√£o', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Investigador">
                    <h3>Investigador</h3>
                    <p>Especialista em resolver mist√©rios e encontrar pistas ocultas.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Dedu√ß√£o</li>
                            <li>An√°lise de Cena</li>
                            <li>Interrogat√≥rio</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe"
                        onclick="selecionarClasse('Investigador', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Mago">
                    <h3>Mago</h3>
                    <p>Manipulador de energias arcanas e feiti√ßos poderosos.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Magias Arcanas</li>
                            <li>Ritual M√≠stico</li>
                            <li>Conhecimento M√°gico</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe" onclick="selecionarClasse('Mago', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Suporte">
                    <h3>Suporte</h3>
                    <p>Especialista em auxiliar e fortalecer aliados.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Fortifica√ß√£o</li>
                            <li>Inspira√ß√£o</li>
                            <li>Prote√ß√£o Aliada</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe" onclick="selecionarClasse('Suporte', this)">Selecionar</button>
                </div>
                <div class="classe-card" data-classe="Tecnol√≥gico">
                    <h3>Tecnol√≥gico</h3>
                    <p>Mestre em tecnologia avan√ßada e gadgets.</p>
                    <div class="classe-habilidades">
                        <h4>Habilidades Iniciais:</h4>
                        <ul>
                            <li>Hackear</li>
                            <li>Criar Dispositivos</li>
                            <li>Reparo T√©cnico</li>
                        </ul>
                    </div>
                    <button class="selecionar-classe"
                        onclick="selecionarClasse('Tecnol√≥gico', this)">Selecionar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Sele√ß√£o de Origem -->
    <div class="modal-origens" id="modal-origens">
        <div class="modal-content">
            <span class="close-modal" onclick="closeOrigemModal()">&times;</span>
            <h2>Selecione sua Origem</h2>
            <div class="origem-grid">
                <div class="origem-card" data-origem="amnesico">
                    <h3>Amn√©sico</h3>
                    <p>Indiv√≠duo que perdeu suas mem√≥rias, em busca de seu passado perdido.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Amn√©sico', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="artista">
                    <h3>Artista</h3>
                    <p>Criador talentoso que expressa sua arte de diversas formas.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Artista', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="conspiracionista">
                    <h3>Conspiracionista</h3>
                    <p>Investigador de teorias ocultas e segredos obscuros.</p>
                    <button class="selecionar-origem"
                        onclick="selecionarOrigem('Conspiracionista', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="crianca-perdida">
                    <h3>Crian√ßa Perdida</h3>
                    <p>Jovem que se perdeu de seu lar e cresceu em circunst√¢ncias extraordin√°rias.</p>
                    <button class="selecionar-origem"
                        onclick="selecionarOrigem('Crian√ßa Perdida', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="eremita">
                    <h3>Eremita</h3>
                    <p>Solit√°rio que encontrou sabedoria no isolamento.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Eremita', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="escolhido">
                    <h3>Escolhido</h3>
                    <p>Destinado a cumprir uma profecia ou miss√£o divina.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Escolhido', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="exilado">
                    <h3>Exilado</h3>
                    <p>Banido de sua terra natal, carrega consigo as marcas do passado.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Exilado', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="experimento">
                    <h3>Experimento</h3>
                    <p>Resultado de experi√™ncias cient√≠ficas ou m√≠sticas.</p>
                    <button class="selecionar-origem"
                        onclick="selecionarOrigem('Experimento', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="forasteiro">
                    <h3>Forasteiro</h3>
                    <p>Viajante de terras distantes com costumes diferentes.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Forasteiro', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="ginasta">
                    <h3>Ginasta</h3>
                    <p>Atleta com extraordin√°ria destreza f√≠sica e disciplina.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Ginasta', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="herdeiro">
                    <h3>Herdeiro</h3>
                    <p>Descendente de uma linhagem importante ou poderosa.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Herdeiro', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="inventor">
                    <h3>Inventor</h3>
                    <p>Criador de dispositivos e solu√ß√µes inovadoras.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Inventor', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="jornalista">
                    <h3>Jornalista</h3>
                    <p>Investigador da verdade e revelador de hist√≥rias.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Jornalista', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="militar">
                    <h3>Militar</h3>
                    <p>Treinado nas artes da guerra e disciplina militar.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Militar', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="nomade">
                    <h3>N√¥made</h3>
                    <p>Viajante sem lar fixo, adapt√°vel a diferentes culturas.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('N√¥made', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="profeta">
                    <h3>Profeta</h3>
                    <p>Vision√°rio com a capacidade de prever eventos futuros.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Profeta', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="programador">
                    <h3>Programador</h3>
                    <p>Mestre em c√≥digos e sistemas computacionais.</p>
                    <button class="selecionar-origem"
                        onclick="selecionarOrigem('Programador', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="psicologo">
                    <h3>Psic√≥logo</h3>
                    <p>Estudioso da mente e comportamento humano.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Psic√≥logo', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="religioso">
                    <h3>Religioso</h3>
                    <p>Devoto seguidor de cren√ßas e pr√°ticas espirituais.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Religioso', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="servente">
                    <h3>Servente</h3>
                    <p>Trabalhador leal que serve a outros com dedica√ß√£o.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Servente', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="universitario">
                    <h3>Universit√°rio</h3>
                    <p>Estudante em busca de conhecimento acad√™mico.</p>
                    <button class="selecionar-origem"
                        onclick="selecionarOrigem('Universit√°rio', this)">Selecionar</button>
                </div>
                <div class="origem-card" data-origem="vingativo">
                    <h3>Vingativo</h3>
                    <p>Motivado pela busca de vingan√ßa por eventos do passado.</p>
                    <button class="selecionar-origem" onclick="selecionarOrigem('Vingativo', this)">Selecionar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Sele√ß√£o de Fam√≠lia-Base -->
    <div class="modal-origens" id="modal-familias">
        <div class="modal-content">
            <span class="close-modal" onclick="closeFamiliaBaseModal()">&times;</span>
            <h2>Selecione sua Fam√≠lia-Base</h2>
            <div class="origem-grid">
                <div class="origem-card">
                    <h3>Ryu</h3>
                    <p>Florescer carmesim</p>
                    <button class="selecionar-origem" onclick="selecionarFamiliaBase('Ryu', this)">Selecionar</button>
                </div>
                <div class="origem-card">
                    <h3>Baek</h3>
                    <p>Manipula√ß√£o vocal</p>
                    <button class="selecionar-origem" onclick="selecionarFamiliaBase('Baek', this)">Selecionar</button>
                </div>
                <div class="origem-card">
                    <h3>Sun</h3>
                    <p>Invoca√ß√£o solar</p>
                    <button class="selecionar-origem" onclick="selecionarFamiliaBase('Sun', this)">Selecionar</button>
                </div>
                <div class="origem-card">
                    <h3>Beaumont</h3>
                    <p>Toque primaveril</p>
                    <button class="selecionar-origem"
                        onclick="selecionarFamiliaBase('Beaumont', this)">Selecionar</button>
                </div>
                <div class="origem-card">
                    <h3>De Lune</h3>
                    <p>Sussurro prism√°tico</p>
                    <button class="selecionar-origem"
                        onclick="selecionarFamiliaBase('De Lune', this)">Selecionar</button>
                </div>
                <div class="origem-card">
                    <h3>Brightmoon</h3>
                    <p>Fragmentos de estrelas</p>
                    <button class="selecionar-origem"
                        onclick="selecionarFamiliaBase('Brightmoon', this)">Selecionar</button>
                </div>
                <div class="origem-card">
                    <h3>Emberfell</h3>
                    <p>Colapso do vazio</p>
                    <button class="selecionar-origem"
                        onclick="selecionarFamiliaBase('Emberfell', this)">Selecionar</button>
                </div>
                <div class="origem-card">
                    <h3>MontClair</h3>
                    <p>Sanguessuga de mana</p>
                    <button class="selecionar-origem"
                        onclick="selecionarFamiliaBase('MontClair', this)">Selecionar</button>
                </div>
                <div class="origem-card">
                    <h3>Fireheart</h3>
                    <p>Aurora √≠gnea</p>
                    <button class="selecionar-origem"
                        onclick="selecionarFamiliaBase('Fireheart', this)">Selecionar</button>
                </div>
                <div class="origem-card">
                    <h3>Kaito</h3>
                    <p>Resson√¢ncia arcana</p>
                    <button class="selecionar-origem" onclick="selecionarFamiliaBase('Kaito', this)">Selecionar</button>
                </div>
                <div class="origem-card">
                    <h3>Kyung</h3>
                    <p>Fenda do destino</p>
                    <button class="selecionar-origem" onclick="selecionarFamiliaBase('Kyung', this)">Selecionar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pop-up de Secreto -->
    <div class="secreto-popup" id="secretoPopup">
        <p>Voc√™ descobriu um segredo! üéâ</p>
    </div>

    <script src="script.js"></script>
    <script>
        function openRacaModal() {
            document.getElementById('modal-racas').style.display = 'block';
        }

        function closeRacaModal() {
            document.getElementById('modal-racas').style.display = 'none';
        }

        function selecionarRaca(raca, button) {
            document.querySelectorAll('.raca-card').forEach(card => {
                card.classList.remove('selected');
            });
            button.closest('.raca-card').classList.add('selected');
            document.querySelector('input[placeholder="Ra√ßa"]').value = raca;
            closeRacaModal();

            if (raca === 'Bruxa') {
                abrirEscolhaHabilidadesMagiasBruxa();
            }
        }

        function abrirEscolhaHabilidadesMagiasBruxa() {
            let modal = document.getElementById('modal-bruxa-escolha');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'modal-bruxa-escolha';
                modal.style = 'position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);z-index:99999;display:flex;align-items:center;justify-content:center;';
                modal.innerHTML = `<div id="modal-bruxa-conteudo" style="background:#fff;padding:30px 40px;border-radius:12px;min-width:320px;max-width:90vw;max-height:90vh;overflow:auto;text-align:center;position:relative;">
            <button onclick="document.getElementById('modal-bruxa-escolha').style.display='none'" style="position:absolute;top:10px;right:10px;font-size:20px;background:none;border:none;cursor:pointer;">&times;</button>
            <h2>Escolher Habilidades e Magias</h2>
            <div style="margin:30px 0;display:flex;gap:30px;justify-content:center;">
                <button id="btn-habilidades-bruxa" style="padding:12px 24px;font-size:1.1em;border-radius:8px;border:1px solid #8e44ad;background:#f3e6fa;color:#6c3483;cursor:pointer;">Habilidades</button>
                <button id="btn-magias-bruxa" style="padding:12px 24px;font-size:1.1em;border-radius:8px;border:1px solid #2980b9;background:#eaf6fb;color:#2980b9;cursor:pointer;">Magias</button>
            </div>
            <div id="conteudo-bruxa"></div>
        </div>`;
                document.body.appendChild(modal);
            }
            modal.style.display = 'flex';
            setTimeout(() => {
                document.getElementById('btn-habilidades-bruxa').onclick = function() {
                    carregarConteudoBruxa('habilidades');
                };
                document.getElementById('btn-magias-bruxa').onclick = function() {
                    carregarConteudoBruxa('magias');
                };
            }, 100);
        }

        function carregarConteudoBruxa(tipo) {
            fetch('bruxa.html')
                .then(resp => resp.text())
                .then(html => {
                    const temp = document.createElement('div');
                    temp.innerHTML = html;
                    let conteudo = '';
                    if (tipo === 'habilidades') {
                        const habilidades = temp.querySelector('h2') && temp.querySelector('h2').textContent.includes('Habilidades') ? temp.querySelector('h2').parentElement : null;
                        if (habilidades) {
                            const cards = Array.from(habilidades.querySelectorAll('.magia > h3')).map(h3 => {
                                const nome = h3.textContent;
                                const desc = h3.nextElementSibling ? h3.nextElementSibling.outerHTML : '';
                                return `<div class='card-escolha-bruxa' data-tipo='habilidade' data-nome='${nome}' style='display:flex;flex-direction:column;align-items:flex-start;gap:6px;background:#f3e6fa;border:2px solid #8e44ad;border-radius:12px;padding:18px 20px;margin:12px 0;cursor:pointer;transition:box-shadow .2s;box-shadow:0 2px 8px #0001;max-width:420px;'><span style='font-weight:bold;font-size:1.1em;color:#6c3483;'>${nome}</span>${desc}</div>`;
                            }).join('');
                            conteudo = `<h2>Habilidades de Bruxa</h2><div id='cards-habilidades-bruxa' style='display:flex;flex-direction:column;align-items:center;'>${cards}</div>`;
                        } else {
                            conteudo = '<p>Habilidades n√£o encontradas.</p>';
                        }
                    } else if (tipo === 'magias') {
                        const magias = Array.from(temp.querySelectorAll('h2')).find(h2 => h2.textContent.includes('Magias'));
                        if (magias) {
                            const magiasBloco = magias.parentElement;
                            const cards = Array.from(magiasBloco.querySelectorAll('.magia > h3')).map(h3 => {
                                const nome = h3.textContent;
                                const desc = h3.nextElementSibling ? h3.nextElementSibling.outerHTML : '';
                                return `<div class='card-escolha-bruxa' data-tipo='magia' data-nome='${nome}' style='display:flex;flex-direction:column;align-items:flex-start;gap:6px;background:#eaf6fb;border:2px solid #2980b9;border-radius:12px;padding:18px 20px;margin:12px 0;cursor:pointer;transition:box-shadow .2s;box-shadow:0 2px 8px #0001;max-width:420px;'><span style='font-weight:bold;font-size:1.1em;color:#2980b9;'>${nome}</span>${desc}</div>`;
                            }).join('');
                            conteudo = `<h2>Magias de Bruxa</h2><div id='cards-magias-bruxa' style='display:flex;flex-direction:column;align-items:center;'>${cards}</div>`;
                        } else {
                            conteudo = '<p>Magias n√£o encontradas.</p>';
                        }
                    }
                    document.getElementById('conteudo-bruxa').innerHTML = conteudo;
                    setTimeout(applyEventosCardsBruxa, 0);
                });
        }

        function applyEventosCardsBruxa() {
            const cardsHab = document.querySelectorAll('.card-escolha-bruxa[data-tipo="habilidade"]');
            const cardsMag = document.querySelectorAll('.card-escolha-bruxa[data-tipo="magia"]');
            cardsHab.forEach(card => {
                card.onclick = function() {
                    window.habilidadeBruxaEscolhida = card.getAttribute('data-nome');
                    document.getElementById('escolha-habilidade-bruxa').innerHTML = card.innerHTML;
                    cardsHab.forEach(x => x.style.boxShadow = '0 2px 8px #0001');
                    card.style.boxShadow = '0 0 0 3px #8e44ad';
                };
            });
            cardsMag.forEach(card => {
                card.onclick = function() {
                    window.magiaBruxaEscolhida = card.getAttribute('data-nome');
                    document.getElementById('escolha-magia-bruxa').innerHTML = card.innerHTML;
                    cardsMag.forEach(x => x.style.boxShadow = '0 2px 8px #0001');
                    card.style.boxShadow = '0 0 0 3px #2980b9';
                };
            });
        }

        function openClasseModal() {
            document.getElementById('modal-classes').style.display = 'block';
        }

        function closeClasseModal() {
            document.getElementById('modal-classes').style.display = 'none';
        }

        function selecionarClasse(classe, button) {
            document.querySelectorAll('.classe-card').forEach(card => {
                card.classList.remove('selected');
            });
            button.closest('.classe-card').classList.add('selected');
            document.querySelector('input[placeholder="Classe"]').value = classe;
            closeClasseModal();
        }

        function openOrigemModal() {
            document.getElementById('modal-origens').style.display = 'block';
        }

        function closeOrigemModal() {
            document.getElementById('modal-origens').style.display = 'none';
        }

        function selecionarOrigem(origem, button) {
            document.querySelectorAll('.origem-card').forEach(card => {
                card.classList.remove('selected');
            });
            button.closest('.origem-card').classList.add('selected');
            document.querySelector('input[placeholder="Origem"]').value = origem;
            closeOrigemModal();
        }

        function openFamiliaBaseModal() {
            document.getElementById('modal-familias').style.display = 'block';
        }

        function closeFamiliaBaseModal() {
            document.getElementById('modal-familias').style.display = 'none';
        }

        function selecionarFamiliaBase(familiaBase, button) {
            document.querySelectorAll('#modal-familias .origem-card').forEach(card => {
                card.classList.remove('selected');
            });
            button.closest('.origem-card').classList.add('selected');
            document.querySelector('input[placeholder="Fam√≠lia-Base"]').value = familiaBase;
            closeFamiliaBaseModal();
        }

        window.onclick = function (event) {
            if (event.target == document.getElementById('modal-racas')) {
                closeRacaModal();
            }
            if (event.target == document.getElementById('modal-classes')) {
                closeClasseModal();
            }
            if (event.target == document.getElementById('modal-origens')) {
                closeOrigemModal();
            }
            if (event.target == document.getElementById('modal-familias')) {
                closeFamiliaBaseModal();
            }
        }

        let clickCount = 0;
        const tituloInfo = document.getElementById('titulo-info-personagem');
        const familiaBaseItem = document.getElementById('familia-base-item');
        const secretoPopup = document.getElementById('secretoPopup');

        tituloInfo.addEventListener('click', () => {
            clickCount++;
            console.log('Clicks:', clickCount);

            if (clickCount === 5) {
                familiaBaseItem.style.display = 'block';
                familiaBaseItem.style.opacity = '0';
                setTimeout(() => {
                    familiaBaseItem.style.opacity = '1';
                }, 10);

                secretoPopup.style.display = 'block';
                setTimeout(() => {
                    secretoPopup.classList.add('show');
                }, 10);

                setTimeout(() => {
                    secretoPopup.classList.remove('show');
                    setTimeout(() => {
                        secretoPopup.style.display = 'none';
                        clickCount = 0;
                    }, 300);
                }, 2000);
            }
        });

        function atualizarStatus(input) {
            // O valor m√°ximo agora √© lido diretamente do atributo 'max' do input
            const max = parseInt(input.max);

            // Garante que o valor est√° entre 0 e o m√°ximo
            let valor = Math.min(Math.max(parseInt(input.value) || 0, 0), max);

            // Atualiza o valor do input
            input.value = valor;

            // Encontra a barra de progresso correspondente
            const barra = input.closest('.status-item').querySelector('.barra-progresso');

            // Calcula a porcentagem
            const porcentagem = max > 0 ? (valor / max) * 100 : 0;

            // Atualiza a barra de progresso
            barra.style.setProperty('--progress-width', `${porcentagem}%`);
        }

        let nivelInterval = null;

        function startIncrementNivel() {
            // Limpa qualquer intervalo existente
            if (nivelInterval) clearInterval(nivelInterval);

            // Incrementa imediatamente
            incrementarNivel();

            // Configura o intervalo para incrementar a cada 100ms
            nivelInterval = setInterval(incrementarNivel, 100);
        }

        function startDecrementNivel() {
            // Limpa qualquer intervalo existente
            if (nivelInterval) clearInterval(nivelInterval);

            // Decrementa imediatamente
            decrementarNivel();

            // Configura o intervalo para decrementar a cada 100ms
            nivelInterval = setInterval(decrementarNivel, 100);
        }

        function stopNivelInterval() {
            // Limpa o intervalo quando o bot√£o √© solto
            if (nivelInterval) {
                clearInterval(nivelInterval);
                nivelInterval = null;
            }
        }

        function incrementarNivel() {
            const input = document.getElementById('nivel-input');
            const valor = parseInt(input.value) + 1;
            if (valor <= 100) {
                input.value = valor;
                atualizarNivel(input);
            } else {
                // Para o intervalo se atingir o m√°ximo
                stopNivelInterval();
            }
        }

        function decrementarNivel() {
            const input = document.getElementById('nivel-input');
            const valor = parseInt(input.value) - 1;
            if (valor >= 0) {
                input.value = valor;
                atualizarNivel(input);
            } else {
                // Para o intervalo se atingir o m√≠nimo
                stopNivelInterval();
            }
        }

        function atualizarNivel(input) {
            // Garante que o valor est√° entre 0 e 100
            let valor = Math.min(Math.max(parseInt(input.value) || 0, 0), 100);

            // Atualiza o valor do input
            input.value = valor;

            const progressBar = document.getElementById('nivel-progress');
            if (progressBar) {
                progressBar.style.width = valor + '%';
                console.log('N√≠vel atualizado:', valor + '%');
            } else {
                console.error('Elemento de barra de progresso n√£o encontrado');
            }

            // Atualiza o contador de atributos com base no n√≠vel
            atualizarContadorAtributos(valor);

            // Se o n√≠vel for definido como 0, preenche os status com seus valores m√°ximos
            if (valor === 0) {
                atualizarVidaMaxima();
                atualizarSanidadeMaxima();
                atualizarManaMaxima();
                atualizarAlmaMaxima();
            }
        }

        // Fun√ß√£o para atualizar o contador de atributos
        function atualizarContadorAtributos(nivel) {
            // Obt√©m o n√≠vel atual
            const nivelAtual = parseInt(document.getElementById('nivel-input').value) || 0;

            // Define os limites de n√≠vel e seus respectivos valores de atributos
            const limites = [
                { nivel: 5, atributos: 15 },
                { nivel: 20, atributos: 17 },
                { nivel: 35, atributos: 19 },
                { nivel: 50, atributos: 21 },
                { nivel: 65, atributos: 23 },
                { nivel: 80, atributos: 25 },
                { nivel: 95, atributos: 27 },
                { nivel: 100, atributos: 30 }
            ];

            // Encontra o valor m√°ximo de atributos para o n√≠vel atual
            let valorMaximo = 12;
            for (const limite of limites) {
                if (nivelAtual >= limite.nivel) {
                    valorMaximo = limite.atributos;
                }
            }

            // Calcula a soma total de todos os atributos (Teste + Sorte)
            const todosInputs = document.querySelectorAll('.atributos-teste input, .atributos-sorte input');
            let somaTotal = 0;
            todosInputs.forEach(input => {
                somaTotal += parseInt(input.value) || 0;
            });

            // Atualiza ambos os contadores com a soma total
            const spanTeste = document.querySelector('.atributos-teste h2 span');
            const spanSorte = document.querySelector('.atributos-sorte h2 span');

            if (spanTeste && spanSorte) {
                spanTeste.textContent = `${somaTotal}/${valorMaximo}`;
                spanSorte.textContent = `${somaTotal}/${valorMaximo}`;
            }
        }

        // Fun√ß√£o para lidar com a mudan√ßa de atributos
        function mudarAtributo(input) {
            // Garante que o valor est√° entre -5 e n√£o tem limite superior
            let valor = parseInt(input.value) || 0;
            if (valor < -5) valor = -5;

            // Atualiza o valor do input
            input.value = valor;

            // Atualiza os contadores
            atualizarContadorAtributos();
        }

        // Inicializar os atributos e contadores
        document.addEventListener('DOMContentLoaded', function () {
            // Inicializa o n√≠vel
            const nivelInput = document.getElementById('nivel-input');
            if (nivelInput) {
                atualizarNivel(nivelInput);
                console.log('N√≠vel inicializado');
            } else {
                console.error('Input de n√≠vel n√£o encontrado');
            }

            // Adiciona eventos de mudan√ßa para todos os inputs de atributos
            const atributosInputs = document.querySelectorAll('.atributos-teste input, .atributos-sorte input');
            atributosInputs.forEach(input => {
                input.addEventListener('change', function () {
                    mudarAtributo(this);
                });
            });

            // Inicializa os contadores
            atualizarContadorAtributos();
        });

        // Adiciona o evento de clique para rolagem de dados nos labels
        document.addEventListener('DOMContentLoaded', function () {
            // ... existing code ...

            // Adiciona o evento de clique para rolagem de dados nos labels
            const atributosLabels = document.querySelectorAll('.atributos-teste label, .atributos-sorte label');
            atributosLabels.forEach(label => {
                label.style.cursor = 'pointer'; // Adiciona cursor pointer para indicar que √© clic√°vel
                label.addEventListener('click', function () {
                    rolarDados(this);
                });
            });
        });

        // Adiciona o evento de clique para rolagem de dados nas per√≠cias
        document.addEventListener('DOMContentLoaded', function () {
            const periciasLabels = document.querySelectorAll('.pericia-item label');
            periciasLabels.forEach(label => {
                label.addEventListener('click', function () {
                    rolarDados(this);
                });
            });
        });

        

    // Evento para cada label de per√≠cia (funciona para todas as per√≠cias)
    document.body.addEventListener('click', function(e) {
        const label = e.target.closest('.pericia-item label');
        if (!label) return;

        // Nome da per√≠cia
        const periciaNome = label.childNodes[0].textContent.trim();
        // Descobre o atributo relacionado
        const atributoRelacionado = periciaParaAtributo[periciaNome];
        if (!atributoRelacionado) {
            // Opcional: alertar se n√£o houver mapeamento
            return;
        }

        // Busca o valor do atributo relacionado
        let pontos = 0;
        document.querySelectorAll('.atributos-teste .atributo-item, .atributos-sorte .atributo-item').forEach(item => {
            const labelA = item.querySelector('label');
            if (labelA && labelA.textContent.trim() === atributoRelacionado) {
                const inputA = item.querySelector('input');
                if (inputA) pontos = parseInt(inputA.value) || 0;
            }
        });

        let qtdDados, modo;
        if (pontos > 0) {
            qtdDados = pontos;
            modo = 'maior';
        } else if (pontos === 0) {
            qtdDados = 2;
            modo = 'menor';
        } else {
            qtdDados = Math.abs(pontos) + 2;
            modo = 'menor';
        }

        // Rola os dados de atributo (d20)
        const resultadosD20 = [];
        for (let i = 0; i < qtdDados; i++) {
            resultadosD20.push(Math.floor(Math.random() * 20) + 1);
        }
        const finalD20 = modo === 'maior' ? Math.max(...resultadosD20) : Math.min(...resultadosD20);

        // Soma o valor do d10 j√° rolado (se houver)
        let d6 = 0;
        const periciaItem = label.closest('.pericia-item');
        const inputD10 = periciaItem ? periciaItem.querySelector('input') : null;
        if (inputD10) {
            // O valor do input √© per√≠cia + d10, ent√£o subtrai o valor salvo da per√≠cia para obter s√≥ o d10
            const tipo = document.getElementById('modal-pericia-titulo').textContent.replace('Per√≠cias de ', '').trim();
            let valorPericia = 0;
            if (window.valoresPericias[tipo] && typeof window.valoresPericias[tipo][periciaNome] !== 'undefined') {
                valorPericia = parseInt(window.valoresPericias[tipo][periciaNome]) || 0;
            }
            d6 = (parseInt(inputD10.value) || 0) - valorPericia;
        }

        // Exibe resultado em um alert estilizado
        const modal = document.createElement('div');
        modal.style.cssText = `
            position: fixed; top: 50%; left: 50%; transform: translate(-50%,-50%);
            background: #222; color: #fff; padding: 24px 32px; border-radius: 12px;
            z-index: 99999; font-size: 18px; font-family: Arial, sans-serif;
            box-shadow: 0 0 24px #000a;
            text-align: center;
        `;
        modal.innerHTML = `
            <b>${periciaNome}</b><br>
            (${atributoRelacionado}: ${pontos})<br>
            Rolou ${qtdDados}d20: <span style="color:#F2780C">${resultadosD20.join(', ')}</span><br>
            <b>Resultado ${modo === 'maior' ? 'MAIOR' : 'MENOR'}: <span style="color:#F2780C">${finalD20}</span></b><br>
            Dado d6 da per√≠cia: <span style="color:#F2780C">${d6}</span><br>
            <b>Total: <span style="color:#F2780C">${finalD20 + d6}</span></b>
            <br><button style="margin-top:12px;padding:4px 16px;font-size:16px;border-radius:6px;border:none;cursor:pointer;background:#F2780C;color:#fff" onclick="this.parentElement.remove()">Fechar</button>
        `;
        document.body.appendChild(modal);
    });

        // Objeto para armazenar os valores das subper√≠cias
        const valoresPericias = {};

        // Fun√ß√£o para fechar o modal
        function fecharModalPericia() {
            document.getElementById('modal-pericias').style.display = 'none';
        }

        // Fecha o modal quando clicar fora dele
        window.onclick = function (event) {
            const modal = document.getElementById('modal-pericias');
            if (event.target == modal) {
                fecharModalPericia();
            }
        }

        // Adiciona o evento de clique para rolagem de dados nas per√≠cias
        document.addEventListener('DOMContentLoaded', function () {
            const periciasLabels = document.querySelectorAll('.pericia-item label');
            periciasLabels.forEach(label => {
                label.addEventListener('click', function () {
                    rolarDados(this);
                });
            });
        });

        // Fun√ß√£o para atualizar o valor m√°ximo de vida com base em Resili√™ncia
        function atualizarVidaMaxima() {
            // Pega o valor do atributo Resili√™ncia
            let resiliencia = 0;
            document.querySelectorAll('.atributos-sorte .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.trim() === 'Resili√™ncia') {
                    resiliencia = parseInt(item.querySelector('input').value) || 0;
                }
            });
            // Calcula a vida m√°xima
            const vidaMaxima = resiliencia * 3 + 20;
            // Busca o status-item correto de Vida
            document.querySelectorAll('.status-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.replace(/\s/g, '').includes('‚ù§Ô∏èVida')) {
                    // Atualiza o campo de vida m√°xima
                    const vidaSpan = item.querySelector('span');
                    if (vidaSpan) vidaSpan.textContent = vidaMaxima;
                    // Atualiza o atributo max do input de vida
                    const vidaInput = item.querySelector('input');
                    if (vidaInput) {
                        vidaInput.max = vidaMaxima;
                        const nivel = parseInt(document.getElementById('nivel-input').value) || 0;
                        if (nivel === 0) {
                            vidaInput.value = vidaMaxima;
                            atualizarStatus(vidaInput);
                        }
                    }
                }
            });
        }

        // Atualiza a vida m√°xima ao carregar a p√°gina e ao mudar Resili√™ncia
        document.addEventListener('DOMContentLoaded', function () {
            atualizarVidaMaxima();
            // Adiciona evento para atualizar ao mudar Resili√™ncia
            document.querySelectorAll('.atributos-sorte .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.trim() === 'Resili√™ncia') {
                    item.querySelector('input').addEventListener('change', atualizarVidaMaxima);
                }
            });
        });

        // Fun√ß√£o para atualizar o valor m√°ximo de sanidade com base em Intelecto e Carisma
        function atualizarSanidadeMaxima() {
            let intelecto = 0;
            let carisma = 0;
            document.querySelectorAll('.atributos-teste .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.trim() === 'Intelecto') {
                    intelecto = parseInt(item.querySelector('input').value) || 0;
                }
                if (label && label.textContent.trim() === 'Carisma') {
                    carisma = parseInt(item.querySelector('input').value) || 0;
                }
            });
            // Calcula a sanidade m√°xima
            const sanidadeMaxima = intelecto * 5 + carisma * 3 + 10;
            // Busca o status-item correto de Sanidade
            document.querySelectorAll('.status-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.replace(/\s/g, '').includes('üß†Sanidade')) {
                    // Atualiza o campo de sanidade m√°xima
                    const sanidadeSpan = item.querySelector('span');
                    if (sanidadeSpan) sanidadeSpan.textContent = sanidadeMaxima;
                    // Atualiza o atributo max do input de sanidade
                    const sanidadeInput = item.querySelector('input');
                    if (sanidadeInput) {
                        sanidadeInput.max = sanidadeMaxima;
                        const nivel = parseInt(document.getElementById('nivel-input').value) || 0;
                        if (nivel === 0) {
                            sanidadeInput.value = sanidadeMaxima;
                            atualizarStatus(sanidadeInput);
                        }
                    }
                }
            });
        }

        // Atualiza a sanidade m√°xima ao carregar a p√°gina e ao mudar Intelecto ou Carisma
        document.addEventListener('DOMContentLoaded', function () {
            atualizarSanidadeMaxima();
            // Adiciona evento para atualizar ao mudar Intelecto ou Carisma
            document.querySelectorAll('.atributos-teste .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && (label.textContent.trim() === 'Intelecto' || label.textContent.trim() === 'Carisma')) {
                    item.querySelector('input').addEventListener('change', atualizarSanidadeMaxima);
                }
            });
        });

        // Fun√ß√£o para atualizar o valor m√°ximo de mana com base em Magia
        function atualizarManaMaxima() {
            let magia = 0;
            document.querySelectorAll('.atributos-teste .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.trim() === 'Magia') {
                    magia = parseInt(item.querySelector('input').value) || 0;
                }
            });
            // Calcula a mana m√°xima
            const manaMaxima = magia * 5 + 15;
            // Busca o status-item correto de Mana
            document.querySelectorAll('.status-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.replace(/\s/g, '').includes('‚ö°Mana')) {
                    // Atualiza o campo de mana m√°xima
                    const manaSpan = item.querySelector('span');
                    if (manaSpan) manaSpan.textContent = manaMaxima;
                    // Atualiza o atributo max do input de mana
                    const manaInput = item.querySelector('input');
                    if (manaInput) {
                        manaInput.max = manaMaxima;
                        const nivel = parseInt(document.getElementById('nivel-input').value) || 0;
                        if (nivel === 0) {
                            manaInput.value = manaMaxima;
                            atualizarStatus(manaInput);
                        }
                    }
                }
            });
        }





        // Atualiza a mana m√°xima ao carregar a p√°gina e ao mudar Magia
        document.addEventListener('DOMContentLoaded', function () {
            atualizarManaMaxima();
            // Adiciona evento para atualizar ao mudar Magia
            document.querySelectorAll('.atributos-teste .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.trim() === 'Magia') {
                    item.querySelector('input').addEventListener('change', atualizarManaMaxima);
                }
            });
        });

        // Fun√ß√£o para atualizar o valor m√°ximo de alma com base em Magia, Resili√™ncia e Intelecto
        function atualizarAlmaMaxima() {
            let magia = 0;
            let resiliencia = 0;
            let intelecto = 0;
            // Busca Magia e Intelecto nos atributos de teste
            document.querySelectorAll('.atributos-teste .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.trim() === 'Magia') {
                    magia = parseInt(item.querySelector('input').value) || 0;
                }
                if (label && label.textContent.trim() === 'Intelecto') {
                    intelecto = parseInt(item.querySelector('input').value) || 0;
                }
            });
            // Busca Resili√™ncia nos atributos de sorte
            document.querySelectorAll('.atributos-sorte .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.trim() === 'Resili√™ncia') {
                    resiliencia = parseInt(item.querySelector('input').value) || 0;
                }
            });
            // Calcula a alma m√°xima
            const almaMaxima = magia * 5 + resiliencia * 3 + intelecto * 2 + 15;
            // Busca o status-item correto de Alma
            document.querySelectorAll('.status-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.replace(/\s/g, '').includes('‚≠êAlma')) {
                    // Atualiza o campo de alma m√°xima
                    const almaSpan = item.querySelector('span');
                    if (almaSpan) almaSpan.textContent = almaMaxima;
                    // Atualiza o atributo max do input de alma
                    const almaInput = item.querySelector('input');
                    if (almaInput) {
                        almaInput.max = almaMaxima;
                        const nivel = parseInt(document.getElementById('nivel-input').value) || 0;
                        if (nivel === 0) {
                            almaInput.value = almaMaxima;
                            atualizarStatus(almaInput);
                        }
                    }
                }
            });
        }

        // Atualiza a alma m√°xima ao carregar a p√°gina e ao mudar Magia, Resili√™ncia ou Intelecto
        document.addEventListener('DOMContentLoaded', function () {
            atualizarAlmaMaxima();
            // Adiciona evento para atualizar ao mudar Magia ou Intelecto
            document.querySelectorAll('.atributos-teste .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && (label.textContent.trim() === 'Magia' || label.textContent.trim() === 'Intelecto')) {
                    item.querySelector('input').addEventListener('change', atualizarAlmaMaxima);
                }
            });
            // Adiciona evento para atualizar ao mudar Resili√™ncia
            document.querySelectorAll('.atributos-sorte .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                               if (label && label.textContent.trim() === 'Resili√™ncia') {
                    item.querySelector('input').addEventListener('change', atualizarAlmaMaxima);
                }
            });
        });

        // Fun√ß√£o para atualizar a Defesa com base em Constitui√ß√£o
        function atualizarDefesa() {
            let constituicao = 0;
            document.querySelectorAll('.atributos-teste .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.trim() === 'Constitui√ß√£o') {
                    constituicao = parseInt(item.querySelector('input').value) || 0;
                }
            });
            const defesa = constituicao + 10;
            // Busca o campo de Defesa de forma robusta
            document.querySelectorAll('.status-combate .status-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.replace(/\s/g, '').toLowerCase() === 'defesa') {
                    const defesaInput = item.querySelector('input');
                    if (defesaInput) defesaInput.value = defesa;
                }
            });
        }

        // Atualiza a Defesa ao carregar a p√°gina e ao mudar Constitui√ß√£o
        document.addEventListener('DOMContentLoaded', function () {
            // Adiciona evento para atualizar ao mudar Constitui√ß√£o
            document.querySelectorAll('.atributos-teste .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.trim() === 'Constitui√ß√£o') {
                    item.querySelector('input').addEventListener('input', atualizarDefesa);
                }
            });
        });

        // INVENT√ÅRIO
        function calcularCapacidadeInventario() {
            let forca = 0;
            const forcaInput = Array.from(document.querySelectorAll('.atributos-teste .atributo-item')).find(item => {
                const label = item.querySelector('label');
                return label && label.textContent.trim() === 'For√ßa';
            })?.querySelector('input');
            if (forcaInput) {
                if (forcaInput.value === '' || isNaN(parseInt(forcaInput.value))) {
                    forcaInput.value = 0;
                }
                forca = parseInt(forcaInput.value) || 0;
            }
            // Soma todos os b√¥nus de carga dos itens
            let bonusCarga = 0;
            document.querySelectorAll('.item-inventario input[placeholder="B√¥nus de Carga"]').forEach(input => {
                bonusCarga += parseInt(input.value) || 0;
            });
            // Garante que a capacidade nunca ser√° menor que 3
            return Math.max(3, 3 + (forca * 2) + bonusCarga);
        }

        function atualizarInventarioUI() {
            const capacidade = calcularCapacidadeInventario();
            const lista = document.getElementById('lista-itens');
            const itens = lista.querySelectorAll('.item-inventario');
            document.getElementById('capacidade-inventario').textContent = capacidade;
            document.getElementById('contador-itens').textContent = itens.length;
            document.getElementById('adicionar-item').disabled = itens.length >= capacidade;
        }

        function adicionarItemInventario(valor = '') {
            const lista = document.getElementById('lista-itens');
            const capacidade = calcularCapacidadeInventario();
            if (lista.querySelectorAll('.item-inventario').length >= capacidade) return;
            const div = document.createElement('div');
            div.className = 'item-inventario';
            div.innerHTML = `<input type="text" placeholder="Nome do item" value="${valor}"><input type="number" placeholder="B√¥nus de Carga" value="0" style="width:80px"><button type="button" title="Remover">‚úñ</button>`;
            div.querySelector('button').onclick = function () {
                div.remove();
                atualizarInventarioUI();
            };
            // Adiciona o event listener para o campo B√¥nus de Carga
            const bonusInput = div.querySelector('input[placeholder="B√¥nus de Carga"]');
            if (bonusInput) {
                bonusInput.addEventListener('input', atualizarInventarioUI);
            }
            lista.appendChild(div);
            atualizarInventarioUI();
        }

        document.addEventListener('DOMContentLoaded', function () {
            atualizarInventarioUI();
            document.getElementById('adicionar-item').onclick = function () {
                adicionarItemInventario();
            };
            // Atualiza capacidade ao mudar For√ßa
            document.querySelectorAll('.atributos-teste .atributo-item').forEach(item => {
                const label = item.querySelector('label');
                if (label && label.textContent.trim() === 'For√ßa') {
                    item.querySelector('input').addEventListener('input', function () {
                        atualizarInventarioUI();
                        // Remove itens extras se capacidade diminuir
                        const capacidade = calcularCapacidadeInventario();
                        const lista = document.getElementById('lista-itens');
                        while (lista.querySelectorAll('.item-inventario').length > capacidade) {
                            lista.lastChild.remove();
                        }
                    });
                }
            });
        });

        document.getElementById('nivel-input').addEventListener('input', function () {
            const progress = document.querySelector('.progress');
            progress.style.width = this.value + '%';
        });

        window.addEventListener('load', function() {
    atualizarInventarioUI();
});

        window.criarBarraBruxa = function() {
            if (document.getElementById('escolhas-bruxa-bar')) return;

            const bar = document.createElement('div');
            bar.id = 'escolhas-bruxa-bar';
            bar.style = `
                position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); 
                width: 95%; max-width: 800px; 
                background: #fffbe6; 
                padding: 10px 16px; 
                display: flex; justify-content: space-between; align-items: center; 
                box-shadow: 0 -2px 8px #0002; 
                font-size: 1em; color: #222; 
                border-radius: 12px 12px 0 0; 
                z-index: 10000;
                transition: all 0.2s ease-in-out;
            `;
            
            bar.innerHTML = `
                <div id="barra-bruxa-content" style="display: flex; align-items: center; gap: 20px; flex-grow: 1;">
                    <b>Escolhas da Bruxa:</b>
                    <div id="escolha-habilidade-bruxa" style="flex:1;">Nenhuma habilidade.</div>
                    <div id="escolha-magia-bruxa" style="flex:1;">Nenhuma magia.</div>
                </div>
                <button id="toggle-barra-bruxa-btn" onclick="toggleBarraBruxa()" style="background:none; border:none; cursor:pointer; font-size: 1.5em; padding: 0 10px; line-height: 1;">‚ñº</button>
            `;
            
            document.body.appendChild(bar);

            // Define o padding inicial corretamente
            requestAnimationFrame(() => {
                const barHeight = bar.offsetHeight;
                document.body.style.paddingBottom = `${barHeight + 20}px`;
                console.log('Barra criada e padding inferior adicionado ao body.');
            });
        };

        document.addEventListener('DOMContentLoaded', function() {
            // Criar a barra automaticamente quando a p√°gina carregar
            window.criarBarraBruxa();
        });

        function toggleBarraBruxa() {
            const bar = document.getElementById('escolhas-bruxa-bar');
            if (!bar) return;

            const content = bar.querySelector('#barra-bruxa-content');
            const button = bar.querySelector('#toggle-barra-bruxa-btn');
            
            bar.classList.toggle('minimized');

            if (bar.classList.contains('minimized')) {
                // Minimiza
                content.style.display = 'none';
                button.innerHTML = '‚ñ≤';
            } else {
                // Maximiza
                content.style.display = 'flex';
                button.innerHTML = '‚ñº';
            }

            // Usa requestAnimationFrame para garantir que a altura seja calculada ap√≥s a renderiza√ß√£o
            requestAnimationFrame(() => {
                const barHeight = bar.offsetHeight;
                document.body.style.paddingBottom = `${barHeight + 20}px`;
            });
        }
    </script>
</body>

</html>